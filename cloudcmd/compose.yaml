services:
  cloudcmd:
    container_name: cloudcmd
    volumes:
      - ${MEDIA_DIR}:/media
      - ${OVERIG_DIR}:/overig
      - ${DEEMIX_DIR}:/deemix
    image: coderaiser/cloudcmd:19.5.1@sha256:47e229d92557de8414e3079211de42b5dc50b10608a0b058f9f0cf6f81dd1d1d
    environment:
      - CLOUDCMD_THEME=dark
    labels:
      - homepage.group=Infra
      - homepage.name=Cloudcommander
      - homepage.icon=cloudcmd.png
      - homepage.href=https://cloudcmd.${DOMAIN}/
      - homepage.description=Filemanager
      - traefik.enable=true
      - traefik.http.routers.cloudcmd.rule=Host(`cloudcmd.${DOMAIN}`)
      - traefik.http.routers.cloudcmd.entrypoints=websecure
      - traefik.http.routers.cloudcmd.middlewares=authentik-forwardauth@docker
      - traefik.http.routers.cloudcmd.tls=true
      - traefik.http.services.cloudcmd.loadbalancer.server.port=8000
    restart: unless-stopped
    user: ${PUID}:${PGID}
    networks:
      - npm
networks:
  npm:
    external: true