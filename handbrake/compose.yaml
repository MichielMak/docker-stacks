services:
  handbrake:
    tty: true
    container_name: handbrake
    devices:
      - /dev/dri/:/dev/dri/
    #    ports:
    #      - 5800:5800
    volumes:
      - ${DOCKER_DATA_DIR}/handbrake/config:/config:rw
      - ${OVERIG_DIR}:/storage:ro
      - ${MEDIA_DIR}:/mnt/media:ro
      - ${OVERIG_DIR}/prestage:/output:rw
    environment:
      - USER_ID=${PUID}
      - GROUP_ID=${PGID}
      - HANDBRAKE_GUI=1
      - TZ=Europe/Amsterdam
      - DARK_MODE=1
    image: jlesage/handbrake:v25.10.1@sha256:7edac5c5219912b3e56f2c9cde7854698a62df1d80a568a60b99068363b76019
    restart: unless-stopped
    networks:
      - npm
networks:
  npm:
    external: true
