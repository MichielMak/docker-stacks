services:
  handbrake:
    tty: true
    container_name: handbrake
    devices:
      - /dev/dri/:/dev/dri/
    #    ports:
    #      - 5800:5800
    volumes:
      - ${DOCKER_DATA_DIR}/handbrake/config:/config:rw
      - ${OVERIG_DIR}:/storage:ro
      - ${MEDIA_DIR}:/mnt/media:ro
      - ${OVERIG_DIR}/prestage:/output:rw
    environment:
      - USER_ID=${PUID}
      - GROUP_ID=${PGID}
      - HANDBRAKE_GUI=1
      - TZ=Europe/Amsterdam
      - DARK_MODE=1
    image: jlesage/handbrake:v25.09.2@sha256:22a57a37f41d6f2c082f9ea98288b93ff7363df6c31dbfc37ab3458be84b9698
    restart: unless-stopped
    networks:
      - npm
networks:
  npm:
    external: true
