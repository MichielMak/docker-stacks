services:
  handbrake:
    tty: true
    container_name: handbrake
    devices:
      - /dev/dri/:/dev/dri/
    #    ports:
    #      - 5800:5800
    volumes:
      - ${DOCKER_DATA_DIR}/handbrake/config:/config:rw
      - ${OVERIG_DIR}:/storage:ro
      - ${MEDIA_DIR}:/mnt/media:ro
      - ${OVERIG_DIR}/prestage:/output:rw
    environment:
      - USER_ID=${PUID}
      - GROUP_ID=${PGID}
      - HANDBRAKE_GUI=1
      - TZ=Europe/Amsterdam
      - DARK_MODE=1
    image: jlesage/handbrake:v25.09.1@sha256:df472b1634f6d57f01836f77b99620d2ca3ca6884350fce2511f7d6036fdfa2f
    restart: unless-stopped
    networks:
      - npm
networks:
  npm:
    external: true
