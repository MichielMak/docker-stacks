services:
  spotweb:
    image: jgeusebroek/spotweb:latest@sha256:41de6f790064df86fe70709a5a46f026360730bf285e73238a9ac9c25b0168bc
    container_name: spotweb
    restart: unless-stopped
    environment:
      - PUID=${PUID}
      - GUID=${GUID}
      - TZ=Europe/Amsterdam
      - SPOTWEB_DB_TYPE=pdo_mysql
      - SPOTWEB_DB_HOST=spotweb_db
      - SPOTWEB_DB_PORT=3306
      - SPOTWEB_DB_NAME=spotweb
      - SPOTWEB_DB_USER=spotweb
      - SPOTWEB_DB_PASS=${MYSQL_PASSWORD}
      - SPOTWEB_CRON_RETRIEVE=* */2 * * *
    depends_on:
      - spotweb_db
    #    ports:
    #     - 81:80
    volumes:
      - ${DOCKER_DATA_DIR}/spotweb/config:/config
    networks:
      - npm
    labels:
      - homepage.group=Media
      - homepage.name=Spotweb
      - homepage.icon=https://raw.githubusercontent.com/spotweb/spotweb/refs/heads/develop/images/spotnet.gif
      - homepage.href=https://spotweb.${DOMAIN}/
      - homepage.description=Decentralized alternative to usenet indexing
  spotweb_db:
    image: linuxserver/mariadb:11.4.8@sha256:64cdbbec61e9bf26521fb73fa8546b3eeb45fb104290ddb4cda9c81cec467a51
    container_name: spotwebdb
    restart: unless-stopped
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - MYSQL_ROOT_PASSWORD=spotweb
      - TZ=Europe/Amsterdam
      - MYSQL_DATABASE=spotweb
      - MYSQL_USER=spotweb
      - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    volumes:
      - ${DOCKER_DATA_DIR}/spotwebdb/config:/config
    networks:
      - npm
#    ports:
#     - 3306:3306
networks:
  npm:
    external: true
